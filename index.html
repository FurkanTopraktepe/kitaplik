<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kitaplığım</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in {
      animation: fade-in 0.3s ease-out;
    }

    #quote-card-preview {
      box-shadow: 0 10px 50px -5px rgba(0, 0, 0, 0.3);
    }

    .book-scene {
      perspective: 1200px;
      min-width: 60px;
      height: 280px;
      margin-right: 12px;
      margin-bottom: 24px;
      z-index: 10;
      position: relative;
      cursor: pointer;
    }

    .book-scene:hover {
      z-index: 50;
      /* Bring to front on hover */
    }

    .book-object {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
      transform-origin: center center -30px;
      /* Adjust pivot */
    }

    .book-scene:hover .book-object {
      transform: rotateY(-70deg) translateX(-20px) translateZ(20px);
    }

    /* The Spine (Front Face) */
    .book-face-spine {
      position: absolute;
      top: 0;
      left: 0;
      width: 60px;
      height: 100%;
      backface-visibility: visible;
      /* transform: translateZ(0px); */
      border-radius: 4px;
      z-index: 2;
    }

    /* The Cover (Right Face) */
    .book-face-cover {
      position: absolute;
      top: 0;
      left: 60px;
      /* Starts exactly after the spine */
      width: 190px;
      height: 100%;
      transform-origin: left;
      transform: rotateY(90deg);
      backface-visibility: visible;
      border-radius: 0 6px 6px 0;
      background-size: cover;
      background-position: center;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // Manual Icon Definitions to avoid CDN issues
    const BookOpen = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
      </svg>
    );

    const Book = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
      </svg>
    );

    const Star = ({ size = 24, fill = 'none', ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
      </svg>
    );

    const Quote = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z" />
        <path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z" />
      </svg>
    );

    const TrendingUp = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
        <polyline points="17 6 23 6 23 12" />
      </svg>
    );

    const Award = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <circle cx="12" cy="8" r="7" />
        <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88" />
      </svg>
    );

    const Search = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <circle cx="11" cy="11" r="8" />
        <path d="m21 21-4.35-4.35" />
      </svg>
    );

    const Plus = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <line x1="12" y1="5" x2="12" y2="19" />
        <line x1="5" y1="12" x2="19" y2="12" />
      </svg>
    );

    const X = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <line x1="18" y1="6" x2="6" y2="18" />
        <line x1="6" y1="6" x2="18" y2="18" />
      </svg>
    );

    const Moon = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
      </svg>
    );

    const Sun = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <circle cx="12" cy="12" r="5" />
        <line x1="12" y1="1" x2="12" y2="3" />
        <line x1="12" y1="21" x2="12" y2="23" />
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
        <line x1="1" y1="12" x2="3" y2="12" />
        <line x1="21" y1="12" x2="23" y2="12" />
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
      </svg>
    );

    const Filter = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />
      </svg>
    );

    const Trash2 = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <polyline points="3 6 5 6 21 6" />
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
        <line x1="10" y1="11" x2="10" y2="17" />
        <line x1="14" y1="11" x2="14" y2="17" />
      </svg>
    );

    const Edit2 = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" />
      </svg>
    );

    const Play = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <polygon points="5 3 19 12 5 21 5 3" />
      </svg>
    );

    const CheckCircle = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
        <polyline points="22 4 12 14.01 9 11.01" />
      </svg>
    );

    const Clock = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <circle cx="12" cy="12" r="10" />
        <polyline points="12 6 12 12 16 14" />
      </svg>
    );

    const Download = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
        <polyline points="7 10 12 15 17 10" />
        <line x1="12" y1="15" x2="12" y2="3" />
      </svg>
    );

    const Upload = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
        <polyline points="17 8 12 3 7 8" />
        <line x1="12" y1="3" x2="12" y2="15" />
      </svg>
    );

    const Box = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />
        <polyline points="3.27 6.96 12 12.01 20.73 6.96" />
        <line x1="12" y1="22.08" x2="12" y2="12" />
      </svg>
    );

    const Share2 = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <circle cx="18" cy="5" r="3" />
        <circle cx="6" cy="12" r="3" />
        <circle cx="18" cy="19" r="3" />
        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" />
        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" />
      </svg>
    );

    const LayoutGrid = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <rect width="7" height="7" x="3" y="3" rx="1" />
        <rect width="7" height="7" x="14" y="3" rx="1" />
        <rect width="7" height="7" x="14" y="14" rx="1" />
        <rect width="7" height="7" x="3" y="14" rx="1" />
      </svg>
    );

    const Fire = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.1.2-2.2.5-3.3.3-1.1 1-2.2 2-3.2 1 1.1 1 2.2 1 3.3z" />
      </svg>
    );

    const FileText = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" />
        <polyline points="14 2 14 8 20 8" />
        <line x1="16" y1="13" x2="8" y2="13" />
        <line x1="16" y1="17" x2="8" y2="17" />
        <line x1="10" y1="9" x2="8" y2="9" />
      </svg>
    );

    const Settings = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
        <circle cx="12" cy="12" r="3" />
      </svg>
    );

    const Type = ({ size = 24, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
        <polyline points="4 7 4 4 20 4 20 7" />
        <line x1="9" y1="20" x2="15" y2="20" />
        <line x1="12" y1="4" x2="12" y2="20" />
      </svg>
    );


    const handleImageUpload = (e, targetStateSetter, setCurrentState) => {
      const file = e.target.files[0];
      if (!file) return;

      // Limit file size (e.g., 5MB check before processing, though we compress anyway)
      if (file.size > 5 * 1024 * 1024) {
        alert("Dosya boyutu çok büyük! Lütfen 5MB'dan küçük bir resim seçin. Otomatik olarak küçültülecektir.");
      }

      const reader = new FileReader();
      reader.onload = (event) => {
        const img = new Image();
        img.onload = () => {
          const canvas = document.createElement('canvas');
          let width = img.width;
          let height = img.height;
          const maxSize = 400;

          // Resize logic
          if (width > height) {
            if (width > maxSize) {
              height *= maxSize / width;
              width = maxSize;
            }
          } else {
            if (height > maxSize) {
              width *= maxSize / height;
              height = maxSize;
            }
          }

          canvas.width = width;
          canvas.height = height;

          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0, width, height);

          // Compress to JPEG with 0.7 quality
          const dataUrl = canvas.toDataURL('image/jpeg', 0.7);

          if (setCurrentState) {
            targetStateSetter({ ...setCurrentState, coverImage: dataUrl });
          } else {
            targetStateSetter(prev => ({ ...prev, coverImage: dataUrl }));
          }
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    };

    const BookSpine = ({ book, onClick, is3D }) => {
      // 2D SIMPLE VIEW
      if (!is3D) {
        return (
          <div
            onClick={onClick}
            draggable="true"
            onDragStart={(e) => {
              e.dataTransfer.setData('bookId', book.id);
            }}
            className="relative cursor-pointer transition-all hover:translate-y-[-8px] hover:shadow-xl mr-1 mb-2"
            style={{
              width: '60px',
              height: '280px',
              backgroundColor: book.cover,
              borderRadius: '0 4px 4px 0',
              boxShadow: 'inset -2px 0 4px rgba(0,0,0,0.2), 2px 2px 8px rgba(0,0,0,0.15)',
              border: '2px solid rgba(107, 68, 35, 0.3)',
              borderLeft: '6px solid rgba(107, 68, 35, 0.5)'
            }}
          >
            <div className="absolute inset-0 flex items-center justify-center" style={{ writingMode: 'vertical-rl' }}>
              <span className="text-xs font-semibold text-white px-2 text-center" style={{ textShadow: '1px 1px 2px rgba(0,0,0,0.5)' }}>
                {book.title}
              </span>
            </div>
            {book.totalPages > 0 && book.currentPage > 0 && book.status === 'reading' && (
              <div className="absolute bottom-0 left-0 right-0 h-1 bg-white/20">
                <div
                  className="h-full bg-green-500"
                  style={{ width: `${Math.min((book.currentPage / book.totalPages) * 100, 100)}%` }}
                />
              </div>
            )}
            {book.rating > 0 && (
              <div className="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex items-center gap-0.5">
                <Star size={10} fill="#FFD700" stroke="#FFD700" />
                <span className="text-[10px] text-white font-bold">{book.rating}</span>
              </div>
            )}
          </div>
        );
      }

      // 3D PREMIUM VIEW
      return (
        <div
          className="book-scene"
          draggable="true"
          onDragStart={(e) => {
            e.dataTransfer.setData('bookId', book.id);
            e.dataTransfer.effectAllowed = 'move';
          }}
          onClick={onClick}
        >
          <div className="book-object">
            {/* SPINE (Visible by default) */}
            <div
              className="book-face-spine shadow-lg"
              style={{
                backgroundColor: book.cover,
                boxShadow: 'inset -2px 0 4px rgba(0,0,0,0.2), -5px 0 10px rgba(0,0,0,0.1)',
                border: '1px solid rgba(0,0,0,0.2)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center'
              }}
            >
              <div className="absolute inset-0 flex items-center justify-center" style={{ writingMode: 'vertical-rl', transform: 'rotate(180deg)' }}>
                <span className="text-sm font-bold text-white px-2 text-center tracking-wide" style={{ textShadow: '1px 1px 2px rgba(0,0,0,0.6)' }}>
                  {book.title}
                </span>
              </div>

              {/* Progress bar on spine */}
              {book.totalPages > 0 && book.currentPage > 0 && book.status === 'reading' && (
                <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 w-1.5 h-16 bg-black/30 rounded-full overflow-hidden">
                  <div
                    className="w-full bg-green-400 absolute bottom-0"
                    style={{ height: `${Math.min((book.currentPage / book.totalPages) * 100, 100)}%` }}
                  />
                </div>
              )}

              {/* Rating star on spine */}
              {book.rating > 0 && (
                <div className="absolute top-4 left-1/2 transform -translate-x-1/2 flex flex-col items-center gap-0.5">
                  <Star size={12} fill="#FFD700" stroke="#FFD700" />
                  <span className="text-[10px] text-white font-bold">{book.rating}</span>
                </div>
              )}
            </div>

            {/* COVER (Visible on hover) */}
            <div
              className="book-face-cover shadow-2xl flex flex-col p-6 text-white relative"
              style={{
                backgroundColor: book.cover,
                background: `linear-gradient(135deg, ${book.cover} 0%, #1a1a1a 150%)`, // Gradient for depth
              }}
            >
              {/* Cover Design */}
              <div className="flex-1 flex flex-col items-center justify-center text-center border-2 border-white/20 p-4 m-2 rounded-sm relative overflow-hidden group">
                {book.coverImage ? (
                  <img
                    src={book.coverImage}
                    alt={book.title}
                    className="absolute inset-0 w-full h-full object-cover opacity-90 transition-opacity group-hover:opacity-100"
                  />
                ) : (
                  <>
                    <h3 className="text-xl font-bold mb-2 leading-tight drop-shadow-md">{book.title}</h3>
                    <div className="w-8 h-0.5 bg-white/50 mb-2"></div>
                    <p className="text-sm font-medium opacity-90">{book.author}</p>
                    <span className="mt-4 text-[10px] uppercase tracking-widest px-2 py-1 bg-white/10 rounded">{book.genre}</span>
                  </>
                )}
              </div>

              {/* Cover Bottom Info */}
              <div className="mt-auto flex justify-between items-end text-xs font-semibold opacity-80 pt-4 border-t border-white/10">
                <div className="flex items-center gap-1">
                  <Star size={14} fill="#FFD700" stroke="none" />
                  <span>{book.rating > 0 ? book.rating : '-'} / 5</span>
                </div>
              </div>

              {/* Spine shadow overlay for realism */}
              <div className="absolute left-0 top-0 bottom-0 w-4 bg-gradient-to-r from-black/20 to-transparent pointer-events-none"></div>
            </div>
          </div>
        </div>
      );
    };

    const BookDetail = ({ book, onClose, onUpdate, onDelete, isDark, themeColors, collections, onUpdateCollection, onShareQuote }) => {
      const [newHighlight, setNewHighlight] = useState('');

      const addHighlight = () => {
        if (newHighlight.trim()) {
          onUpdate(book.id, { highlights: [...book.highlights, newHighlight] });
          setNewHighlight('');
        }
      };

      return (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
          <div className={`rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-8 relative shadow-2xl ${themeColors.card} ${themeColors.border} border-2`}>
            <button
              onClick={onClose}
              className={`absolute top-4 right-4 ${themeColors.text} opacity-70 hover:opacity-100 transition-opacity`}
            >
              <X size={24} />
            </button>

            <div className="flex gap-6 mb-6">
              <div
                className="w-32 h-48 rounded shadow-lg flex-shrink-0 relative overflow-hidden"
                style={{
                  backgroundColor: book.cover,
                  boxShadow: '4px 4px 12px rgba(0,0,0,0.3)'
                }}
              >
                {book.coverImage && (
                  <img src={book.coverImage} alt={book.title} className="w-full h-full object-cover" />
                )}
              </div>

              <div className="flex-1">
                <div className="flex justify-between items-start">
                  <div>
                    <h2 className={`text-3xl font-bold mb-1 ${themeColors.text}`}>{book.title}</h2>
                    <p className={`text-lg mb-2 ${themeColors.accent}`}>{book.author}</p>
                    <span className={`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-4 ${themeColors.button}`}>
                      {book.genre || 'Tür Belirtilmemiş'}
                    </span>
                  </div>
                </div>


                <div className="mb-4 text-xs font-semibold">
                  {book.totalPages > 0 && (
                    <div className={`p-2 rounded flex items-center gap-2 mb-2 ${themeColors.widget}`}>
                      <div className="flex-1">
                        <div className="flex justify-between mb-1">
                          <span>İlerleme: Sayfa {book.currentPage || 0} / {book.totalPages}</span>
                          <span>{Math.round(((book.currentPage || 0) / book.totalPages) * 100)}%</span>
                        </div>
                        <div className="w-full bg-gray-300 rounded-full h-2 overflow-hidden">
                          <div
                            className="bg-[#7B3F3F] h-2 rounded-full transition-all duration-500"
                            style={{ width: `${Math.min(((book.currentPage || 0) / book.totalPages) * 100, 100)}%` }}
                          ></div>
                        </div>
                      </div>
                    </div>
                  )}
                </div>

                <div className="flex gap-4 mb-4">
                  <div className="flex-1">
                    <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Durum</label>
                    <select
                      value={book.status}
                      onChange={(e) => onUpdate(book.id, { status: e.target.value })}
                      className={`w-full p-2 border-2 rounded ${isDark
                        ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                        : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                        }`}
                    >
                      <option value="want-to-read">Okunacak</option>
                      <option value="reading">Okunuyor</option>
                      <option value="read">Okundu</option>
                    </select>
                  </div>

                  <div className="flex-1">
                    <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Şu Anki Sayfa</label>
                    <div className="flex items-center gap-2">
                      <input
                        type="number"
                        value={book.currentPage || ''}
                        onChange={(e) => onUpdate(book.id, { currentPage: Number(e.target.value) })}
                        placeholder={book.totalPages ? `/ ${book.totalPages}` : '0'}
                        className={`w-full p-2 border-2 rounded ${isDark
                          ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                          : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                          }`}
                      />
                    </div>
                  </div>
                </div>

                <div className="mb-4">
                  <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Kapak Resmi (URL veya Yükle)</label>
                  <div className="flex gap-2 mb-2">
                    <input
                      type="text"
                      value={book.coverImage || ''}
                      onChange={(e) => onUpdate(book.id, { coverImage: e.target.value })}
                      placeholder="https://..."
                      className={`flex-1 p-2 border-2 rounded ${isDark
                        ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                        : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                        }`}
                    />
                    <label className={`flex items-center justify-center w-12 rounded cursor-pointer transition-colors ${isDark
                      ? 'bg-[#4A3B2F] hover:bg-[#4D4439] text-[#E8D4BA]'
                      : 'bg-[#C8A882] hover:bg-[#B89872] text-[#654321]'}`}>
                      <Upload size={20} />
                      <input
                        type="file"
                        accept="image/*"
                        className="hidden"
                        onChange={(e) => handleImageUpload(e, (updates) => onUpdate(book.id, updates), book)}
                      />
                    </label>
                  </div>
                </div>

                <div className="mb-4">
                  <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Puanım</label>
                  <div className="flex gap-2">
                    {[1, 2, 3, 4, 5].map(star => (
                      <Star
                        key={star}
                        size={28}
                        className="cursor-pointer transition-all"
                        fill={star <= book.rating ? '#FFD700' : 'none'}
                        stroke={star <= book.rating ? '#FFD700' : '#D2B48C'}
                        onClick={() => onUpdate(book.id, { rating: star })}
                      />
                    ))}

                    <button
                      onClick={() => onDelete(book.id)}
                      className="p-2 text-red-500 hover:bg-red-500 hover:text-white rounded transition-colors ml-auto"
                      title="Kitabı Sil"
                    >
                      <Trash2 size={20} />
                    </button>
                  </div>
                </div>

                {/* Collection Management inside Modal */}
                <div className="mb-4">
                  <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Koleksiyonlarım</label>
                  <div className="flex flex-wrap gap-2">
                    {collections.map(col => (
                      <label
                        key={col.id}
                        className={`flex items-center gap-2 px-3 py-1.5 rounded-full cursor-pointer transition-all border-2 ${col.bookIds.includes(book.id)
                          ? 'bg-[#7B3F3F] border-[#7B3F3F] text-white'
                          : isDark
                            ? 'bg-[#2D2620] border-[#4A3B2F] text-[#E8D4BA] hover:bg-[#322822]'
                            : 'bg-[#E8DCC8] border-[#C8A882] text-[#654321] hover:bg-[#E0D0B8]'
                          }`}
                      >
                        <input
                          type="checkbox"
                          className="hidden"
                          checked={col.bookIds.includes(book.id)}
                          onChange={() => onUpdateCollection(col.id, book.id)}
                        />
                        <span className="text-xs font-bold">{col.name}</span>
                      </label>
                    ))}
                    {collections.length === 0 && (
                      <span className="text-xs italic opacity-60 px-2 py-1">Henüz koleksiyon oluşturulmadı.</span>
                    )}
                  </div>
                </div>
              </div>
            </div>

            <div className="mb-6">
              <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>İncelemem</label>
              <textarea
                value={book.review}
                onChange={(e) => onUpdate(book.id, { review: e.target.value })}
                className={`w-full p-3 border-2 rounded min-h-[100px] ${isDark
                  ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                  : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                  }`}
                placeholder="Bu kitap hakkında düşüncelerini yaz..."
              />
            </div>

            <div>
              <div className="flex justify-between items-center mb-2">
                <label className={`block text-sm font-semibold flex items-center gap-2 ${themeColors.text}`}>
                  <Quote size={18} />
                  Altını Çizdiklerim
                </label>
              </div>

              <div className="space-y-3 mb-3">
                {book.highlights.map((highlight, idx) => (
                  <div key={idx} className={`p-3 rounded border-l-4 border-orange-500 shadow-sm ${themeColors.widget} group`}>
                    <div className="flex justify-between items-start gap-2">
                      <p className={`italic ${themeColors.text} flex-1`}>"{highlight}"</p>
                      <button
                        onClick={() => onShareQuote(highlight, book)}
                        className="opacity-0 group-hover:opacity-100 p-1 hover:bg-black/5 rounded transition-all text-orange-500"
                        title="Kart Oluştur ve Paylaş"
                      >
                        <Share2 size={16} />
                      </button>
                    </div>
                  </div>
                ))}
              </div>

              <div className="flex gap-2">
                <input
                  type="text"
                  value={newHighlight}
                  onChange={(e) => setNewHighlight(e.target.value)}
                  onKeyPress={(e) => {
                    if (e.key === 'Enter') {
                      addHighlight();
                    }
                  }}
                  className={`flex-1 p-2 border-2 rounded ${isDark
                    ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                    : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                    }`}
                  placeholder="Yeni alıntı ekle..."
                />
                <button
                  onClick={addHighlight}
                  className="px-4 py-2 bg-[#7B3F3F] text-white rounded hover:bg-[#5D3030] transition-colors"
                >
                  Ekle
                </button>
              </div>
            </div>
          </div >
        </div >
      );
    };

    const BookshelfApp = () => {
      const [view, setView] = useState('library');

      // Theme State (oak, walnut, white, dark)
      const [theme, setTheme] = useState(() => {
        const saved = localStorage.getItem('bookshelf_theme');
        return saved ? JSON.parse(saved) : 'oak';
      });

      const isDark = theme === 'dark';

      // Font State (sans, serif, mono)
      const [font, setFont] = useState(() => {
        const saved = localStorage.getItem('bookshelf_font');
        return saved ? JSON.parse(saved) : 'sans';
      });

      // Dynamic Styles based on Theme
      const getThemeColors = () => {
        switch (theme) {
          case 'dark':
            return {
              bg: 'bg-[#121212]',
              text: 'text-[#E5E5E5]',
              accent: 'text-[#BB86FC]',
              card: 'bg-[#1E1E1E]',
              border: 'border-[#333333]',
              sidebar: 'bg-[#1A1A1A]',
              button: 'bg-[#332940] hover:bg-[#453756] text-[#BB86FC]',
              widget: 'bg-[#252525] border border-[#333333]'
            };
          case 'midnight':
            return {
              bg: 'bg-[#0F172A]',
              text: 'text-[#F1F5F9]',
              accent: 'text-[#38BDF8]',
              card: 'bg-[#1E293B]',
              border: 'border-[#334155]',
              sidebar: 'bg-[#020617]',
              button: 'bg-[#0369A1] hover:bg-[#075985] text-white',
              widget: 'bg-[#1E293B] border border-[#38BDF8]/30 shadow-[0_0_15px_rgba(56,189,248,0.1)]'
            };
          case 'forest':
            return {
              bg: 'bg-[#064E3B]',
              text: 'text-[#ECFDF5]',
              accent: 'text-[#34D399]',
              card: 'bg-[#065F46]',
              border: 'border-[#064E3B]',
              sidebar: 'bg-[#022C22]',
              button: 'bg-[#059669] hover:bg-[#047857] text-white',
              widget: 'bg-[#065F46] border border-[#34D399]/30 shadow-[0_0_15px_rgba(52,211,153,0.1)]'
            };
          case 'paper':
            return {
              bg: 'bg-[#FDF6E3]',
              text: 'text-[#657B83]',
              accent: 'text-[#268BD2]',
              card: 'bg-[#EEE8D5]',
              border: 'border-[#D3CBB1]',
              sidebar: 'bg-[#F5EAD2]',
              button: 'bg-[#93A1A1] hover:bg-[#586E75] text-white',
              widget: 'bg-[#EEE8D5] border border-[#D3CBB1]'
            };
          case 'walnut':
            return {
              bg: 'bg-[#2B1B17]',
              text: 'text-[#D7CCC8]',
              accent: 'text-[#8D6E63]',
              card: 'bg-[#3E2723]',
              border: 'border-[#4E342E]',
              sidebar: 'bg-[#1B110E]',
              button: 'bg-[#5D4037] hover:bg-[#4E342E] text-white',
              widget: 'bg-[#3E2723] border border-[#5D4037] shadow-lg'
            };
          case 'white':
            return {
              bg: 'bg-[#F8FAFC]',
              text: 'text-[#0F172A]',
              accent: 'text-[#64748B]',
              card: 'bg-[#FFFFFF]',
              border: 'border-[#E2E8F0]',
              sidebar: 'bg-[#F1F5F9]',
              button: 'bg-[#CBD5E1] hover:bg-[#94A3B8] text-[#1E293B]',
              widget: 'bg-white border border-[#E2E8F0] shadow-sm'
            };
          case 'oak': default:
            return {
              bg: 'bg-[#FEF9EF]',
              text: 'text-[#5C4033]',
              accent: 'text-[#BC6C25]',
              card: 'bg-[#F5E6CC]',
              border: 'border-[#DDB892]',
              sidebar: 'bg-[#E6CCB2]',
              button: 'bg-[#B08968] hover:bg-[#7F5539] text-white',
              widget: 'bg-[#F5E6CC] border border-[#DDB892] shadow-md'
            };
        }
      };

      const themeColors = getThemeColors();

      const fontClasses = {
        'sans': 'font-sans',
        'serif': 'font-serif',
        'mono': 'font-mono'
      };

      useEffect(() => {
        localStorage.setItem('bookshelf_theme', JSON.stringify(theme));
      }, [theme]);

      useEffect(() => {
        localStorage.setItem('bookshelf_font', JSON.stringify(font));
      }, [font]);



      // Initialize 3D Mode
      const [is3DMode, setIs3DMode] = useState(() => {
        const savedMode = localStorage.getItem('bookshelf_is3DMode');
        return savedMode ? JSON.parse(savedMode) : true;
      });

      const genres = ['Roman', 'Bilim Kurgu', 'Dünya Klasikleri', 'Kişisel Gelişim', 'Tarih', 'Felsefe', 'Diğer'];


      // Initialize Reading Goals & Streak
      const [readingGoal, setReadingGoal] = useState(() => {
        const saved = localStorage.getItem('bookshelf_readingGoal');
        return saved ? JSON.parse(saved) : 30; // 30 mins default
      });

      const [annualGoal, setAnnualGoal] = useState(() => {
        const saved = localStorage.getItem('bookshelf_annualGoal');
        return saved ? JSON.parse(saved) : 20; // 20 books default
      });

      const [challengeName, setChallengeName] = useState(() => {
        const saved = localStorage.getItem('bookshelf_challengeName');
        return saved ? JSON.parse(saved) : `${new Date().getFullYear()} Okuma Hedefi`;
      });

      const [streakData, setStreakData] = useState(() => {
        const saved = localStorage.getItem('bookshelf_streakData');
        const today = new Date().toISOString().split('T')[0];
        const defaultData = { streak: 0, longestStreak: 0, lastReadDate: '', dailyProgress: { date: today, minutes: 0 } };

        if (!saved) return defaultData;

        const data = JSON.parse(saved);

        // Ensure longestStreak exists for legacy data
        if (!data.longestStreak) data.longestStreak = data.streak;

        // Reset daily progress if it's a new day
        if (data.dailyProgress.date !== today) {
          // Check if streak was broken (yesterday was skipped)
          const lastRead = new Date(data.lastReadDate);
          const yesterday = new Date();
          yesterday.setDate(yesterday.getDate() - 1);

          // Simple streak logic: if last read date is NOT yesterday and NOT today, reset streak
          // Note: This is a simplified check. For robust logic we'd compare dates properly.
          // If lastReadDate is empty, streak is 0.
          if (data.lastReadDate && data.lastReadDate !== today && data.lastReadDate !== yesterday.toISOString().split('T')[0]) {
            data.streak = 0;
          }

          data.dailyProgress = { date: today, minutes: 0 };
        }


        return data;
      });

      // Collections State
      const [collections, setCollections] = useState(() => {
        const saved = localStorage.getItem('bookshelf_collections');
        return saved ? JSON.parse(saved) : [
          { id: 'favs', name: 'Favorilerim', bookIds: [] },
          { id: 'tobuy', name: 'Alınacaklar', bookIds: [] }
        ];
      });

      const [activeCollection, setActiveCollection] = useState(null);

      useEffect(() => {
        localStorage.setItem('bookshelf_collections', JSON.stringify(collections));
      }, [collections]);

      // Drag and Drop Logic
      const handleDragStart = (e, bookId) => {
        e.dataTransfer.setData('bookId', bookId.toString());
      };

      const handleDragOver = (e) => {
        e.preventDefault();
      };

      const handleDrop = (e, collectionId) => {
        e.preventDefault();
        const bookId = e.dataTransfer.getData('bookId');
        if (!bookId) return;

        setCollections(prev => prev.map(col => {
          if (col.id === collectionId) {
            if (col.bookIds.includes(Number(bookId))) return col;
            if (col.bookIds.includes(String(bookId))) return col;
            return { ...col, bookIds: [...col.bookIds, Number(bookId)] };
          }
          return col;
        }));
      };

      const createCollection = () => {
        const name = prompt("Yeni Koleksiyon Adı:");
        if (name) {
          setCollections([...collections, { id: 'col-' + Date.now().toString(), name, bookIds: [] }]);
        }
      };

      const deleteCollection = (id, e) => {
        e.stopPropagation();
        if (confirm('Koleksiyonu silmek istediğine emin misin?')) {
          setCollections(collections.filter(c => c.id !== id));
          if (activeCollection === id) setActiveCollection(null);
        }
      };

      const removeFromCollection = (collectionId, bookId, e) => {
        if (e) e.stopPropagation();
        setCollections(prev => prev.map(col => {
          if (col.id === collectionId) {
            return { ...col, bookIds: col.bookIds.filter(id => id != bookId) };
          }
          return col;
        }));
      };

      const toggleBookInCollection = (collectionId, bookId) => {
        setCollections(prev => prev.map(col => {
          if (col.id === collectionId) {
            const exists = col.bookIds.includes(bookId);
            if (exists) {
              return { ...col, bookIds: col.bookIds.filter(id => id !== bookId) };
            } else {
              return { ...col, bookIds: [...col.bookIds, bookId] };
            }
          }
          return col;
        }));
      };

      // Initialize books from localStorage
      const [books, setBooks] = useState(() => {
        const savedBooks = localStorage.getItem('bookshelf_books');
        if (savedBooks) {
          return JSON.parse(savedBooks);
        }
        return [
          {
            id: 1,
            title: 'Suç ve Ceza',
            author: 'Fyodor Dostoyevski',
            genre: 'Dünya Klasikleri',
            cover: '#7B3F3F',
            rating: 5,
            status: 'read',
            review: 'İnsan psikolojisinin derinliklerine inen muhteşem bir eser.',
            highlights: ['İnsan her şeye alışır, alçak!', 'Acı çekmek ve acıyı kabullenmek gerekir.']
          },
          {
            id: 2,
            title: 'Simyacı',
            author: 'Paulo Coelho',
            genre: 'Roman',
            cover: '#8B6F47',
            rating: 4,
            status: 'read',
            review: 'Kişisel efsaneyi aramak üzerine ilham verici bir yolculuk.',
            highlights: ['Evren sana yardım eder, eğer gerçekten bir şey istiyorsan.']
          },
          {
            id: 3,
            title: '1984',
            author: 'George Orwell',
            genre: 'Bilim Kurgu',
            cover: '#5D4037',
            rating: 5,
            status: 'reading',
            review: '',
            highlights: ['Savaş barıştır, özgürlük köleliktir, cehalet güçtür.']
          },
          {
            id: 4,
            title: 'Küçük Prens',
            author: 'Antoine de Saint-Exupéry',
            genre: 'Dünya Klasikleri',
            cover: '#904D5C',
            rating: 0,
            status: 'want-to-read',
            review: '',
            highlights: []
          }
        ]
      });



      // Save is3DMode to localStorage
      useEffect(() => {
        localStorage.setItem('bookshelf_is3DMode', JSON.stringify(is3DMode));
      }, [is3DMode]);

      // Save books to localStorage
      useEffect(() => {
        localStorage.setItem('bookshelf_books', JSON.stringify(books));
      }, [books]);

      // Save reading goal
      useEffect(() => {
        localStorage.setItem('bookshelf_readingGoal', JSON.stringify(readingGoal));
      }, [readingGoal]);

      // Save annual goal
      useEffect(() => {
        localStorage.setItem('bookshelf_annualGoal', JSON.stringify(annualGoal));
      }, [annualGoal]);

      // Save challenge name
      useEffect(() => {
        localStorage.setItem('bookshelf_challengeName', JSON.stringify(challengeName));
      }, [challengeName]);

      // Save streak data
      useEffect(() => {
        localStorage.setItem('bookshelf_streakData', JSON.stringify(streakData));
      }, [streakData]);

      const [selectedBook, setSelectedBook] = useState(null);
      const [showAddBook, setShowAddBook] = useState(false);
      const [showLogReading, setShowLogReading] = useState(false);

      // Quote Card Creator State
      const [showQuoteCreator, setShowQuoteCreator] = useState(false);
      const [quoteToShare, setQuoteToShare] = useState(null);
      const [bookForQuote, setBookForQuote] = useState(null);
      const [cardConfig, setCardConfig] = useState({
        bgType: 'gradient',
        bgValue: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
        textColor: '#ffffff',
        showBranding: true,
        fontSize: 'text-2xl',
        alignment: 'text-center'
      });

      // Search & Filter State
      const [searchQuery, setSearchQuery] = useState('');
      const [filterStatus, setFilterStatus] = useState('all');
      const [filterGenre, setFilterGenre] = useState('all');
      const [sortBy, setSortBy] = useState('date-desc'); // date-desc, date-asc, rating-desc, rating-asc, title-asc, title-desc, pages-desc, pages-asc

      // Filter and Sort Logic
      const filteredBooks = books.filter(book => {
        const matchesSearch = book.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
          book.author.toLowerCase().includes(searchQuery.toLowerCase());
        const matchesStatus = filterStatus === 'all' || book.status === filterStatus;
        const matchesGenre = filterGenre === 'all' || book.genre === filterGenre;

        const matchesCollection = activeCollection
          ? collections.find(c => c.id === activeCollection)?.bookIds.includes(book.id)
          : true;

        return matchesSearch && matchesStatus && matchesGenre && matchesCollection;
      }).sort((a, b) => {
        switch (sortBy) {
          case 'date-desc': return b.id - a.id; // Assuming higher ID is newer
          case 'date-asc': return a.id - b.id;
          case 'rating-desc': return b.rating - a.rating;
          case 'rating-asc': return a.rating - b.rating;
          case 'title-asc': return a.title.localeCompare(b.title);
          case 'title-desc': return b.title.localeCompare(a.title);
          case 'pages-desc': return b.totalPages - a.totalPages;
          case 'pages-asc': return a.totalPages - b.totalPages;
          default: return 0;
        }
      });
      const [logMinutes, setLogMinutes] = useState('');
      const [newBook, setNewBook] = useState({
        title: '',
        author: '',
        genre: 'Roman',
        cover: '#7B3F3F',
        coverImage: '',
        rating: 0,
        status: 'want-to-read',
        review: '',
        highlights: [],
        totalPages: '',
        currentPage: 0
      });


      const statusLabels = {
        'want-to-read': 'Okunacak',
        'reading': 'Okunuyor',
        'read': 'Okundu'
      };

      const addBook = () => {
        if (newBook.title && newBook.author) {
          setBooks([...books, { ...newBook, id: Date.now() }]);
          setNewBook({
            title: '',
            author: '',
            genre: 'Roman',
            cover: '#7B3F3F',
            coverImage: '',
            rating: 0,
            status: 'want-to-read',
            review: '',
            highlights: [],
            totalPages: '',
            currentPage: 0
          });
          setShowAddBook(false);
        }
      };

      const deleteBook = (id) => {
        if (window.confirm('Bu kitabı silmek istediğine emin misin?')) {
          setBooks(books.filter(b => b.id !== id));
          if (selectedBook && selectedBook.id === id) {
            setSelectedBook(null);
          }
        }
      };

      const updateBook = (id, updates) => {
        setBooks(books.map(book => book.id === id ? { ...book, ...updates } : book));
        if (selectedBook && selectedBook.id === id) {
          setSelectedBook({ ...selectedBook, ...updates });
        }
      };

      const addHighlight = (bookId, highlight) => {
        if (highlight.trim()) {
          const book = books.find(b => b.id === bookId);
          updateBook(bookId, { highlights: [...book.highlights, highlight] });
        }
      };

      const logReadingTime = () => {
        const minutes = parseInt(logMinutes);
        if (!isNaN(minutes) && minutes > 0) {
          const today = new Date().toISOString().split('T')[0];
          const newProgress = streakData.dailyProgress.minutes + minutes;
          let newStreak = streakData.streak;
          let newLastReadDate = streakData.lastReadDate;

          // If goal reached today and wasn't reached before today
          if (newProgress >= readingGoal && streakData.dailyProgress.minutes < readingGoal) {
            // Only increment streak if we haven't already counted today (check lastReadDate)
            if (streakData.lastReadDate !== today) {
              newStreak += 1;
              newLastReadDate = today;

              // Update longest streak
              if (newStreak > (streakData.longestStreak || 0)) {
                streakData.longestStreak = newStreak;
              }
            }
          }

          setStreakData({
            ...streakData,
            streak: newStreak,
            lastReadDate: newLastReadDate,
            dailyProgress: { ...streakData.dailyProgress, minutes: newProgress }
          });

          setLogMinutes('');
          setShowLogReading(false);
        }
      };

      const openQuoteCreator = (quote, book) => {
        setQuoteToShare(quote);
        setBookForQuote(book);
        setShowQuoteCreator(true);
      };

      const handleExportQuoteCard = () => {
        const element = document.getElementById('quote-card-preview');
        if (!element) return;

        html2canvas(element, {
          useCORS: true,
          allowTaint: true,
          backgroundColor: null,
          scale: 2
        }).then(canvas => {
          const link = document.createElement('a');
          link.download = `alinti-${Date.now()}.png`;
          link.href = canvas.toDataURL('image/png');
          link.click();
        });
      };

      const exportData = () => {
        const data = {
          books,
          readingGoal,
          streakData,
          theme, // export current theme
          exportDate: new Date().toISOString()
        };

        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `bookshelf_backup_${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      };


      const importData = (event) => {
        const file = event.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = (e) => {
          try {
            const data = JSON.parse(e.target.result);

            // Basic validation
            if (!Array.isArray(data.books)) {
              alert('Geçersiz yedek dosyası formatı!');
              return;
            }

            if (window.confirm('Mevcut verilerin üzerine yazılacak. Emin misiniz?')) {
              setBooks(data.books);
              if (data.readingGoal) setReadingGoal(data.readingGoal);
              if (data.streakData) setStreakData(data.streakData);
              if (data.theme) setTheme(data.theme);
              alert('Veriler başarıyla geri yüklendi!');
            }
          } catch (error) {
            alert('Dosya okunamadı. JSON formatı hatalı olabilir.');
            console.error(error);
          }
        };
        reader.readAsText(file);
        // Reset input so same file can be selected again if needed
        event.target.value = null;
      };

      // Chart.js Logic with Cleanup
      const genreChartRef = useRef(null);
      const monthlyChartRef = useRef(null);

      useEffect(() => {
        if (view === 'stats') {
          // Robust check for Chart.js availability
          if (typeof Chart === 'undefined') {
            console.error('Chart.js not loaded');
            return;
          }

          const ctx1 = document.getElementById('genreChart');
          const ctx2 = document.getElementById('monthlyChart');

          if (ctx1 && ctx2) {
            // Destroy existing charts to prevent "Canvas is already in use" error
            if (genreChartRef.current) {
              genreChartRef.current.destroy();
            }
            if (monthlyChartRef.current) {
              monthlyChartRef.current.destroy();
            }

            // Genre Distribution
            const genreCounts = genres.reduce((acc, genre) => {
              acc[genre] = books.filter(b => b.genre === genre).length;
              return acc;
            }, {});

            genreChartRef.current = new Chart(ctx1, {
              type: 'doughnut',
              data: {
                labels: Object.keys(genreCounts),
                datasets: [{
                  data: Object.values(genreCounts),
                  backgroundColor: [
                    '#7B3F3F', '#8B6F47', '#5D4037', '#6B4423',
                    '#904D5C', '#4A3428', '#D2B48C'
                  ],
                  borderWidth: 0
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                  legend: {
                    position: 'right',
                    labels: { color: themeColors.text }
                  }
                }
              }
            });

            // Monthly Activity
            monthlyChartRef.current = new Chart(ctx2, {
              type: 'bar',
              data: {
                labels: ['Oca', 'Şub', 'Mar', 'Nis', 'May', 'Haz'],
                datasets: [{
                  label: 'Okunan Kitap',
                  data: [2, 1, 3, 4, 2, books.filter(b => b.status === 'read').length],
                  backgroundColor: themeColors.button.split(' ')[0].replace('bg-[', '').replace(']', ''),
                  borderRadius: 4
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                  y: { beginAtZero: true, grid: { color: themeColors.border.replace('border-[', '').replace(']', '') }, ticks: { color: themeColors.accent.replace('text-[', '').replace(']', '') } },
                  x: { grid: { display: false }, ticks: { color: themeColors.accent.replace('text-[', '').replace(']', '') } }
                },
                plugins: { legend: { display: false } }
              }
            });
          }
        }

        // Cleanup function
        return () => {
          if (genreChartRef.current) genreChartRef.current.destroy();
          if (monthlyChartRef.current) monthlyChartRef.current.destroy();
        };
      }, [view, books, isDark]);

      const stats = {
        total: books.length,
        read: books.filter(b => b.status === 'read').length,
        reading: books.filter(b => b.status === 'reading').length,
        totalPages: books.reduce((sum, b) => sum + (Number(b.totalPages) || 0), 0),
        avgRating: books.filter(b => b.rating > 0).length > 0
          ? (books.filter(b => b.rating > 0).reduce((sum, b) => sum + b.rating, 0) / books.filter(b => b.rating > 0).length).toFixed(1)
          : 0
      };



      return (
        <div className={`min-h-screen flex transition-colors ${themeColors.bg} ${fontClasses[font]}`}>
          {/* Sidebar */}
          <div className={`w-64 p-6 flex flex-col gap-4 border-r sticky top-0 h-screen overflow-y-auto ${themeColors.sidebar} ${themeColors.border}`}>
            <h2 className={`text-xl font-bold flex items-center gap-2 ${themeColors.text}`}>
              <Box size={24} /> Koleksiyonlar
            </h2>
            <button onClick={createCollection} className={`flex items-center gap-2 p-2 rounded hover:bg-black/5 ${themeColors.text}`}>
              <Plus size={20} /> Yeni Oluştur
            </button>

            <div className="flex-1 space-y-2">
              <div
                onClick={() => { setActiveCollection(null); setView('library'); }}
                className={`p-2 rounded cursor-pointer flex items-center gap-2 ${activeCollection === null && view === 'library' ? 'bg-black/10' : ''} ${themeColors.text}`}
              >
                <BookOpen size={20} /> Tüm Kitaplar
              </div>
              {collections.map(col => (
                <div
                  key={col.id}
                  onClick={() => { setActiveCollection(col.id); setView('library'); }}
                  onDragOver={handleDragOver}
                  onDrop={(e) => handleDrop(e, col.id)}
                  className={`p-2 rounded cursor-pointer group flex justify-between items-center ${activeCollection === col.id && view === 'library' ? 'bg-black/10' : ''} ${themeColors.text}`}
                >
                  <span className="truncate">{col.name} <span className="text-xs opacity-60">({col.bookIds.length})</span></span>
                  <Trash2 size={16} className="opacity-0 group-hover:opacity-100 hover:text-red-500" onClick={(e) => deleteCollection(col.id, e)} />
                </div>
              ))}
            </div>

            {/* Settings Button in Sidebar */}
            <div className={`mt-auto pt-4 border-t ${themeColors.border}`}>
              <div
                onClick={() => { setView('settings'); setActiveCollection(null); }}
                className={`p-2 rounded cursor-pointer flex items-center gap-2 ${view === 'settings' ? 'bg-black/10' : ''} ${themeColors.text}`}
              >
                <Settings size={20} /> Ayarlar
              </div>
            </div>
          </div>

          <div className="flex-1 p-8 h-screen overflow-y-auto">
            {/* Header */}
            <div className="max-w-7xl mx-auto mb-8">
              <div className="flex items-center justify-between mb-6">
                <h1 className={`text-4xl font-bold flex items-center gap-3 ${themeColors.text}`}>
                  <BookOpen size={40} />
                  Kitaplığım
                </h1>

                <div className="flex items-center gap-4">
                  {/* Streak & Progress Widget */}
                  <div className={`flex items-center gap-4 px-4 py-2 rounded-lg ${themeColors.widget}`}>
                    <div className="flex items-center gap-1" title={`${streakData.streak} Günlük Seri`}>
                      <Fire size={20} className={`${streakData.streak > 0 ? 'text-orange-500 fill-orange-500' : 'text-gray-400'}`} />
                      <span className={`font-bold ${themeColors.text}`}>{streakData.streak}</span>
                    </div>
                    <div className="w-px h-6 bg-current opacity-20"></div>
                    <div className="flex items-center gap-2 cursor-pointer" onClick={() => setShowLogReading(true)} title="Okuma Ekle">
                      <div className="relative w-8 h-8">
                        <svg className="w-full h-full transform -rotate-90">
                          <circle
                            cx="16" cy="16" r="14"
                            stroke="currentColor" strokeWidth="3" fill="none"
                            className="opacity-20"
                          />
                          <circle
                            cx="16" cy="16" r="14"
                            stroke="currentColor" strokeWidth="3" fill="none"
                            strokeDasharray={88}
                            strokeDashoffset={88 - (Math.min(streakData.dailyProgress.minutes, readingGoal) / readingGoal) * 88}
                            className={`${streakData.dailyProgress.minutes >= readingGoal ? 'text-green-500' : 'text-blue-500'} transition-all duration-500`}
                          />
                        </svg>
                        <div className="absolute inset-0 flex items-center justify-center">
                          <span className={`text-[10px] font-bold ${themeColors.text}`}>{Math.round((streakData.dailyProgress.minutes / readingGoal) * 100)}%</span>
                        </div>
                      </div>
                      <div className="flex flex-col">
                        <span className={`text-xs font-bold leading-none ${themeColors.text}`}>
                          {streakData.dailyProgress.minutes} / {readingGoal} dk
                        </span>
                        <span className={`text-[10px] opacity-70 ${themeColors.text}`}>Bugünkü Hedef</span>
                      </div>
                    </div>
                  </div>

                  <button
                    onClick={() => setIs3DMode(!is3DMode)}
                    className={`p-3 rounded-full transition-all flex items-center gap-2 shadow-lg ${themeColors.button}`}
                    title={is3DMode ? '2D Görünüme Geç' : '3D Görünüme Geç'}
                  >
                    {is3DMode ? <Box size={24} /> : <LayoutGrid size={24} />}
                  </button>
                </div>
              </div>

              {/* Navigation */}
              <div className="flex gap-4 mb-6 flex-wrap">
                <button
                  onClick={() => setView('library')}
                  className={`px-6 py-2 rounded-lg font-semibold transition-all ${view === 'library'
                    ? isDark
                      ? 'bg-[#7B3F3F] text-[#F5E6D3] shadow-lg'
                      : 'bg-[#6B4423] text-[#F5E6D3] shadow-lg'
                    : isDark
                      ? 'bg-[#382E26] text-[#E8D4BA] hover:bg-[#4A3B2F]'
                      : 'bg-[#D4B896] text-[#654321] hover:bg-[#C8A882]'
                    }`}
                >
                  Kitaplık
                </button>
                <button
                  onClick={() => setView('highlights')}
                  className={`px-6 py-2 rounded-lg font-semibold transition-all flex items-center gap-2 ${view === 'highlights'
                    ? isDark
                      ? 'bg-[#7B3F3F] text-[#F5E6D3] shadow-lg'
                      : 'bg-[#6B4423] text-[#F5E6D3] shadow-lg'
                    : isDark
                      ? 'bg-[#382E26] text-[#E8D4BA] hover:bg-[#4A3B2F]'
                      : 'bg-[#D4B896] text-[#654321] hover:bg-[#C8A882]'
                    }`}
                >
                  <Quote size={18} />
                  Alıntılar
                </button>
                <button
                  onClick={() => setView('stats')}
                  className={`px-6 py-2 rounded-lg font-semibold transition-all flex items-center gap-2 ${view === 'stats'
                    ? isDark
                      ? 'bg-[#7B3F3F] text-[#F5E6D3] shadow-lg'
                      : 'bg-[#6B4423] text-[#F5E6D3] shadow-lg'
                    : isDark
                      ? 'bg-[#382E26] text-[#E8D4BA] hover:bg-[#4A3B2F]'
                      : 'bg-[#D4B896] text-[#654321] hover:bg-[#C8A882]'
                    }`}
                >
                  <TrendingUp size={18} />
                  İstatistikler
                </button>
              </div>

              {/* Add Book Button */}
              <button
                onClick={() => setShowAddBook(true)}
                className={`px-6 py-3 rounded-lg font-semibold transition-all shadow-lg flex items-center gap-2 ${isDark
                  ? 'bg-[#7B3F3F] text-[#F5E6D3] hover:bg-[#5D3030]'
                  : 'bg-[#7B3F3F] text-[#F5E6D3] hover:bg-[#5D3030]'
                  }`}
              >
                <Plus size={20} />
                Kitap Ekle
              </button>
            </div>

            {/* Content */}
            <div className="max-w-7xl mx-auto">
              {view === 'library' && (
                <div>
                  {/* Search & Filter Toolbar */}
                  <div className={`mb-6 p-4 rounded-lg shadow-md ${isDark ? 'bg-[#382E26]' : 'bg-[#E8DCC8]'}`}>
                    <div className="flex flex-col md:flex-row gap-4">
                      {/* Search */}
                      <div className="flex-1 relative">
                        <Search className={`absolute left-3 top-1/2 transform -translate-y-1/2 ${themeColors.accent}`} size={20} />
                        <input
                          type="text"
                          value={searchQuery}
                          onChange={(e) => setSearchQuery(e.target.value)}
                          placeholder="Kitap veya yazar ara..."
                          className={`w-full pl-10 pr-4 py-2 border-2 rounded ${isDark
                            ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA] placeholer-[#6B5A4A]'
                            : 'border-[#C8A882] bg-[#F5E6D3] text-[#654321] placeholder-[#A0856A]'
                            }`}
                        />
                      </div>

                      {/* Filters & Sort */}
                      <div className="flex gap-2 overflow-x-auto pb-2 md:pb-0">
                        {/* Status Filter */}
                        <select
                          value={filterStatus}
                          onChange={(e) => setFilterStatus(e.target.value)}
                          className={`p-2 border-2 rounded ${isDark
                            ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                            : 'border-[#C8A882] bg-[#F5E6D3] text-[#654321]'
                            }`}
                        >
                          <option value="all">Tüm Durumlar</option>
                          <option value="reading">Okunuyor</option>
                          <option value="want-to-read">Okunacak</option>
                          <option value="read">Okundu</option>
                        </select>

                        {/* Genre Filter */}
                        <select
                          value={filterGenre}
                          onChange={(e) => setFilterGenre(e.target.value)}
                          className={`p-2 border-2 rounded ${isDark
                            ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                            : 'border-[#C8A882] bg-[#F5E6D3] text-[#654321]'
                            }`}
                        >
                          <option value="all">Tüm Türler</option>
                          {genres.map(g => <option key={g} value={g}>{g}</option>)}
                        </select>

                        {/* Sort */}
                        <select
                          value={sortBy}
                          onChange={(e) => setSortBy(e.target.value)}
                          className={`p-2 border-2 rounded ${isDark
                            ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                            : 'border-[#C8A882] bg-[#F5E6D3] text-[#654321]'
                            }`}
                        >
                          <option value="date-desc">En Yeni</option>
                          <option value="date-asc">En Eski</option>
                          <option value="rating-desc">Puan (Yüksek)</option>
                          <option value="rating-asc">Puan (Düşük)</option>
                          <option value="pages-desc">Sayfa (Çok)</option>
                          <option value="pages-asc">Sayfa (Az)</option>
                          <option value="title-asc">A-Z</option>
                          <option value="title-desc">Z-A</option>
                        </select>
                      </div>
                    </div>
                  </div>

                  {/* Is Filtering or Searching? */}
                  {(() => {
                    const isFiltering = searchQuery !== '' || filterStatus !== 'all' || filterGenre !== 'all' || sortBy !== 'date-desc' || activeCollection !== null;

                    return (
                      <div>
                        {isFiltering ? (
                          // SEARCH RESULTS VIEW (SINGLE GRID)
                          <div className={`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 ${is3DMode ? 'perspective-[1000px]' : ''}`}>
                            {filteredBooks.length === 0 ? (
                              <div className={`col-span-full text-center py-10 opacity-70 ${themeColors.text}`}>
                                <p className="text-xl italic">Aramanızla eşleşen kitap bulunamadı.</p>
                              </div>
                            ) : (
                              filteredBooks.map(book => (
                                <BookSpine
                                  key={book.id}
                                  book={book}
                                  onClick={() => setSelectedBook(book)}
                                  is3D={is3DMode}
                                />
                              ))
                            )}
                          </div>
                        ) : (
                          // DEFAULT SHELF VIEW (GROUPED BY STATUS)
                          ['reading', 'want-to-read', 'read'].map(status => {
                            // Filter books for this specific shelf
                            const shelfBooks = books.filter(b => b.status === status);

                            if (shelfBooks.length === 0) return null;

                            return (
                              <div key={status} className="mb-12">
                                <h2 className={`text-2xl font-bold mb-4 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>{statusLabels[status]}</h2>

                                {/* The Cabinet/Shelf Container */}
                                <div
                                  className={`transition-all duration-300 relative ${is3DMode ? 'p-8' : 'p-6 rounded-lg'}`}
                                  style={is3DMode ? {
                                    /* 3D MODE: VINTAGE CABINET STYLE */
                                    backgroundColor: isDark ? '#1e140e' : '#f0e6d2',
                                    backgroundImage: isDark
                                      ? 'radial-gradient(circle at 50% 50%, #3a2e26 0%, #1a120b 90%)'
                                      : 'radial-gradient(circle at 50% 50%, #e8dcc8 0%, #c8aa81 90%)',
                                    boxShadow: isDark
                                      ? 'inset 0 0 60px rgba(0,0,0,0.95), 0 20px 40px rgba(0,0,0,0.6)'
                                      : 'inset 0 0 40px rgba(139,69,19,0.2), 0 10px 20px rgba(0,0,0,0.1)',
                                    borderStyle: 'solid',
                                    borderWidth: '16px',
                                    borderTopColor: isDark ? '#3e2b20' : '#e6c8a0',
                                    borderLeftColor: isDark ? '#322219' : '#deb887',
                                    borderRightColor: isDark ? '#261a12' : '#d2b48c',
                                    borderBottomColor: isDark ? '#1e140d' : '#c8aa81',
                                    borderBottomWidth: '24px',
                                    borderRadius: '4px',
                                    minHeight: '340px',
                                    display: 'flex',
                                    alignItems: 'flex-end',
                                    overflow: 'hidden'
                                  } : {
                                    /* 2D MODE: FLAT SIMPLE STYLE */
                                    background: isDark
                                      ? 'linear-gradient(to bottom, #4A3B2F 0%, #382E26 100%)'
                                      : 'linear-gradient(to bottom, #D4B896 0%, #C8A882 100%)',
                                    boxShadow: isDark
                                      ? 'inset 0 -4px 8px rgba(0,0,0,0.5), 0 4px 12px rgba(0,0,0,0.4)'
                                      : 'inset 0 -4px 8px rgba(0,0,0,0.15), 0 4px 12px rgba(0,0,0,0.1)'
                                  }}
                                >
                                  {is3DMode && (
                                    <>
                                      {/* Inner corner shadows for extra depth */}
                                      <div className="absolute inset-0 pointer-events-none" style={{
                                        boxShadow: 'inset 0 0 20px rgba(0,0,0,0.5)'
                                      }}></div>

                                      {/* Shelf Shadow/Plank definition */}
                                      <div
                                        className="absolute bottom-0 left-0 right-0 h-4 pointer-events-none"
                                        style={{
                                          background: 'linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.5))',
                                          zIndex: 0
                                        }}
                                      ></div>
                                    </>
                                  )}

                                  <div className={`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 ${is3DMode ? 'perspective-[1000px]' : ''} w-full relative z-10`}>
                                    {shelfBooks.map(book => (
                                      <BookSpine
                                        key={book.id}
                                        book={book}
                                        onClick={() => setSelectedBook(book)}
                                        is3D={is3DMode}
                                      />
                                    ))}
                                  </div>
                                </div>
                              </div>
                            );
                          })
                        )}
                      </div>
                    );
                  })()}
                </div>
              )}

              {view === 'highlights' && (
                <div className={`p-8 rounded-lg shadow-lg ${isDark ? 'bg-[#382E26]' : 'bg-[#D4B896]'}`}>
                  <h2 className={`text-3xl font-bold mb-6 flex items-center gap-3 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>
                    <Quote size={32} />
                    Tüm Alıntılarım
                  </h2>
                  <div className="space-y-6">
                    {books.filter(b => b.highlights.length > 0).map(book => (
                      <div key={book.id} className={`border-b-2 pb-6 last:border-b-0 ${isDark ? 'border-[#4A3B2F]' : 'border-[#C8A882]'}`}>
                        <h3 className={`text-xl font-bold mb-3 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>{book.title}</h3>
                        <p className={`text-sm mb-3 ${isDark ? 'text-[#B89968]' : 'text-[#8B6F47]'}`}>{book.author}</p>
                        <div className="space-y-3">
                          {book.highlights.map((highlight, idx) => (
                            <div key={idx} className={`p-4 rounded border-l-4 border-[#7B3F3F] shadow-sm ${isDark ? 'bg-[#2D2620]' : 'bg-[#E8DCC8]'} group`}>
                              <div className="flex justify-between items-start gap-2">
                                <p className={`italic ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'} flex-1`}>"{highlight}"</p>
                                <button
                                  onClick={() => openQuoteCreator(highlight, book)}
                                  className="opacity-0 group-hover:opacity-100 p-1 hover:bg-black/5 rounded transition-all text-orange-500"
                                  title="Kart Oluştur ve Paylaş"
                                >
                                  <Share2 size={16} />
                                </button>
                              </div>
                            </div>
                          ))}
                        </div>
                      </div>
                    ))}
                    {books.filter(b => b.highlights.length > 0).length === 0 && (
                      <p className={`text-center py-8 ${isDark ? 'text-[#B89968]' : 'text-[#8B6F47]'}`}>Henüz alıntı eklemedin.</p>
                    )}
                  </div>
                </div>
              )}

              {view === 'stats' && (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in">

                  {/* Summary Cards */}
                  <div className={`p-6 rounded-lg shadow-lg ${themeColors.card} ${themeColors.border} border`}>
                    <h3 className={`text-lg font-semibold mb-2 ${themeColors.accent}`}>Toplam Kitap</h3>
                    <div className="flex justify-between items-end">
                      <p className={`text-4xl font-bold ${themeColors.text}`}>{stats.total}</p>
                      <Book size={32} className="opacity-20" />
                    </div>
                  </div>

                  <div className={`p-6 rounded-lg shadow-lg ${themeColors.card} ${themeColors.border} border`}>
                    <h3 className={`text-lg font-semibold mb-2 ${themeColors.accent}`}>Toplam Sayfa</h3>
                    <div className="flex justify-between items-end">
                      <p className={`text-4xl font-bold ${themeColors.text}`}>{stats.totalPages}</p>
                      <FileText size={32} className="opacity-20" />
                    </div>
                  </div>

                  <div className={`p-6 rounded-lg shadow-lg ${themeColors.card} ${themeColors.border} border`}>
                    <h3 className={`text-lg font-semibold mb-2 ${themeColors.accent}`}>En Uzun Seri</h3>
                    <div className="flex justify-between items-end">
                      <p className={`text-4xl font-bold ${themeColors.text}`}>{streakData.longestStreak || streakData.streak} <span className="text-lg font-normal">gün</span></p>
                      <Fire size={32} className="opacity-20 text-orange-500" />
                    </div>
                  </div>

                  <div className={`p-6 rounded-lg shadow-lg ${themeColors.card} ${themeColors.border} border`}>
                    <h3 className={`text-lg font-semibold mb-2 ${themeColors.accent}`}>Ort. Puan</h3>
                    <div className="flex justify-between items-end">
                      <p className={`text-4xl font-bold flex items-center gap-2 ${themeColors.text}`}>
                        {stats.avgRating}
                      </p>
                      <Star size={32} fill="#FFD700" stroke="#FFD700" />
                    </div>
                  </div>

                  {/* Charts Area */}
                  <div className={`p-6 rounded-lg shadow-lg col-span-1 md:col-span-2 ${isDark ? 'bg-[#382E26]' : 'bg-[#D4B896]'}`}>
                    <h3 className={`text-lg font-semibold mb-4 ${isDark ? 'text-[#B89968]' : 'text-[#654321]'}`}>Tür Dağılımı</h3>
                    <div className="h-64 flex justify-center">
                      <canvas id="genreChart"></canvas>
                    </div>
                  </div>

                  <div className={`p-6 rounded-lg shadow-lg col-span-1 md:col-span-2 ${isDark ? 'bg-[#382E26]' : 'bg-[#D4B896]'}`}>
                    <h3 className={`text-lg font-semibold mb-4 ${isDark ? 'text-[#B89968]' : 'text-[#654321]'}`}>Aylık Okuma Aktivitesi</h3>
                    <div className="h-64 w-full">
                      <canvas id="monthlyChart"></canvas>
                    </div>
                  </div>

                  {/* Challenge & Goals (Existing) */}
                  <div className={`p-6 rounded-lg shadow-lg col-span-1 md:col-span-2 ${isDark ? 'bg-[#382E26]' : 'bg-[#D4B896]'}`}>
                    <div className="flex items-center gap-2 mb-2">
                      <Award size={24} className={`${isDark ? 'text-[#B89968]' : 'text-[#654321]'}`} />
                      <input
                        type="text"
                        value={challengeName}
                        onChange={(e) => setChallengeName(e.target.value)}
                        className={`text-lg font-semibold bg-transparent border-b-2 border-transparent hover:border-current focus:border-current outline-none w-full transition-all ${isDark ? 'text-[#B89968]' : 'text-[#654321]'}`}
                      />
                    </div>
                    <div className="flex items-center gap-4 mb-2">
                      <div className="flex-1 h-4 bg-gray-300 rounded-full overflow-hidden">
                        <div
                          className="h-full bg-gradient-to-r from-yellow-500 to-orange-500 transition-all duration-1000"
                          style={{ width: `${Math.min((stats.read / annualGoal) * 100, 100)}%` }}
                        />
                      </div>
                      <span className={`text-sm font-bold ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>{Math.round((stats.read / annualGoal) * 100)}%</span>
                    </div>
                    <div className="flex justify-between items-center text-sm">
                      <span className={`${isDark ? 'text-[#B89968]' : 'text-[#654321]'}`}>Okunan: <b>{stats.read}</b> Kitap</span>
                      <div className="flex items-center gap-1">
                        <span className={`${isDark ? 'text-[#B89968]' : 'text-[#654321]'}`}>Hedef:</span>
                        <input
                          type="number"
                          value={annualGoal}
                          onChange={(e) => setAnnualGoal(Number(e.target.value))}
                          className={`w-16 p-1 text-center border rounded font-bold ${isDark
                            ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                            : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                            }`}
                        />
                      </div>
                    </div>
                  </div>

                  {/* Daily Goal Input */}
                  <div className={`p-6 rounded-lg shadow-lg ${isDark ? 'bg-[#382E26]' : 'bg-[#D4B896]'}`}>
                    <h3 className={`text-lg font-semibold mb-2 ${isDark ? 'text-[#B89968]' : 'text-[#654321]'}`}>Günlük Hedef</h3>
                    <div className="flex items-center gap-2">
                      <input
                        type="number"
                        value={readingGoal}
                        onChange={(e) => setReadingGoal(Number(e.target.value))}
                        className={`w-20 p-2 border-2 rounded text-xl font-bold ${isDark
                          ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                          : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                          }`}
                      />
                      <span className={`text-xl ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>dk</span>
                    </div>
                  </div>



                </div>
              )}
            </div>

            {/* Add Book Modal */}
            {showAddBook && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                <div className={`rounded-lg max-w-3xl w-full p-8 relative shadow-2xl ${isDark ? 'bg-[#382E26]' : 'bg-[#D4B896]'}`}>
                  <h2 className={`text-2xl font-bold mb-6 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Yeni Kitap Ekle</h2>

                  <div className="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4">
                    {/* Left Column */}
                    <div className="space-y-4">
                      <div>
                        <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Kitap Adı</label>
                        <input
                          type="text"
                          value={newBook.title}
                          onChange={(e) => setNewBook({ ...newBook, title: e.target.value })}
                          placeholder="Örn: Nutuk"
                          className={`w-full p-2 border-2 rounded ${isDark
                            ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                            : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                            }`}
                        />
                      </div>

                      <div>
                        <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Yazar</label>
                        <input
                          type="text"
                          value={newBook.author}
                          onChange={(e) => setNewBook({ ...newBook, author: e.target.value })}
                          placeholder="Örn: M. Kemal Atatürk"
                          className={`w-full p-2 border-2 rounded ${isDark
                            ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                            : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                            }`}
                        />
                      </div>

                      <div className="grid grid-cols-2 gap-4">
                        <div>
                          <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Tür</label>
                          <select
                            value={newBook.genre}
                            onChange={(e) => setNewBook({ ...newBook, genre: e.target.value })}
                            className={`w-full p-2 border-2 rounded ${isDark
                              ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                              : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                              }`}
                          >
                            {genres.map(genre => (
                              <option key={genre} value={genre}>{genre}</option>
                            ))}
                          </select>
                        </div>
                        <div>
                          <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Toplam Sayfa</label>
                          <input
                            type="number"
                            value={newBook.totalPages}
                            onChange={(e) => setNewBook({ ...newBook, totalPages: Number(e.target.value) })}
                            placeholder="350"
                            className={`w-full p-2 border-2 rounded ${isDark
                              ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                              : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                              }`}
                          />
                        </div>
                      </div>

                      <div>
                        <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Kapak Resmi (URL veya Yükle)</label>
                        <div className="flex gap-2">
                          <input
                            type="text"
                            value={newBook.coverImage}
                            onChange={(e) => setNewBook({ ...newBook, coverImage: e.target.value })}
                            placeholder="https://..."
                            className={`flex-1 p-2 border-2 rounded ${isDark
                              ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                              : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                              }`}
                          />
                          <label className={`flex items-center justify-center w-12 rounded cursor-pointer transition-colors ${isDark
                            ? 'bg-[#4A3B2F] hover:bg-[#4D4439] text-[#E8D4BA]'
                            : 'bg-[#C8A882] hover:bg-[#B89872] text-[#654321]'}`}>
                            <Upload size={20} />
                            <input
                              type="file"
                              accept="image/*"
                              className="hidden"
                              onChange={(e) => handleImageUpload(e, setNewBook, newBook)}
                            />
                          </label>
                        </div>
                      </div>
                    </div>

                    {/* Right Column */}
                    <div className="flex flex-col h-full">
                      <div className="mb-4">
                        <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Durum</label>
                        <select
                          value={newBook.status}
                          onChange={(e) => setNewBook({ ...newBook, status: e.target.value })}
                          className={`w-full p-2 border-2 rounded ${isDark
                            ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                            : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                            }`}
                        >
                          <option value="want-to-read">Okunacak</option>
                          <option value="reading">Okunuyor</option>
                          <option value="read">Okundu</option>
                        </select>
                      </div>

                      <div className="flex-1">
                        <label className={`block text-sm font-semibold mb-3 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Kapak Rengi</label>
                        <div className="grid grid-cols-6 gap-2">
                          {['#7B3F3F', '#904E5C', '#5D4037', '#6B4423', '#8B6F47', '#4A3428', '#2E4053', '#1E8449', '#D4AC0D', '#A04000', '#212121', '#78909C'].map(color => (
                            <button
                              key={color}
                              onClick={() => setNewBook({ ...newBook, cover: color })}
                              className={`w-10 h-10 rounded-full border-2 transition-transform hover:scale-110 ${newBook.cover === color ? 'border-white ring-2 ring-[#7B3F3F] scale-110' : 'border-transparent'}`}
                              style={{ backgroundColor: color }}
                              title={color}
                            />
                          ))}
                        </div>
                      </div>

                      <div className="mt-auto flex gap-3 pt-6">
                        <button
                          onClick={() => setShowAddBook(false)}
                          className={`flex-1 py-3 border-2 rounded-lg font-semibold transition-colors ${isDark
                            ? 'border-[#4A3B2F] text-[#E8D4BA] hover:bg-[#4A3B2F]'
                            : 'border-[#C8A882] text-[#654321] hover:bg-[#C8A882]'}`}
                        >
                          Vazgeç
                        </button>
                        <button
                          onClick={addBook}
                          className="flex-[2] py-3 bg-[#7B3F3F] text-white rounded-lg font-semibold hover:bg-[#5D3030] transition-colors shadow-lg"
                        >
                          Kitabı Ekle
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {/* Log Reading Modal */}
            {/* Quote Card Creator Modal */}
            {showQuoteCreator && quoteToShare && (
              <div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[60] p-4 animate-fade-in">
                <div className={`rounded-lg max-w-5xl w-full p-8 relative shadow-2xl ${themeColors.card} ${themeColors.border} border-2 max-h-[90vh] overflow-y-auto`}>
                  <button
                    onClick={() => setShowQuoteCreator(false)}
                    className={`absolute top-4 right-4 ${themeColors.text} opacity-70 hover:opacity-100 transition-opacity`}
                  >
                    <X size={24} />
                  </button>

                  <h2 className={`text-2xl font-bold mb-6 ${themeColors.text}`}>Alıntı Kartı Oluştur</h2>

                  <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    {/* Preview Section */}
                    <div className="flex flex-col items-center">
                      <h3 className={`text-lg font-semibold mb-4 ${themeColors.text}`}>Önizleme</h3>
                      <div
                        id="quote-card-preview"
                        className="w-full aspect-square rounded-lg overflow-hidden flex items-center justify-center p-12 relative"
                        style={{ background: cardConfig.bgValue }}
                      >
                        <div className={`${cardConfig.alignment} space-y-6 max-w-lg`}>
                          <p className={`${cardConfig.fontSize} font-serif italic leading-relaxed`} style={{ color: cardConfig.textColor }}>
                            "{quoteToShare}"
                          </p>
                          {cardConfig.showBranding && bookForQuote && (
                            <div className={`text-sm opacity-80 ${cardConfig.alignment}`} style={{ color: cardConfig.textColor }}>
                              <p className="font-semibold">{bookForQuote.title}</p>
                              <p>{bookForQuote.author}</p>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>

                    {/* Controls Section */}
                    <div className="space-y-6">
                      <div>
                        <h3 className={`text-lg font-semibold mb-3 ${themeColors.text}`}>Arka Plan</h3>
                        <div className="grid grid-cols-2 gap-3">
                          {[
                            { name: 'Sunset', value: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' },
                            { name: 'Ocean', value: 'linear-gradient(135deg, #2E3192 0%, #1BFFFF 100%)' },
                            { name: 'Forest', value: 'linear-gradient(135deg, #134E5E 0%, #71B280 100%)' },
                            { name: 'Fire', value: 'linear-gradient(135deg, #F2994A 0%, #F2C94C 100%)' },
                            { name: 'Night', value: 'linear-gradient(135deg, #0F2027 0%, #203A43 50%, #2C5364 100%)' },
                            { name: 'Rose', value: 'linear-gradient(135deg, #ED213A 0%, #93291E 100%)' }
                          ].map((preset) => (
                            <button
                              key={preset.name}
                              onClick={() => setCardConfig({ ...cardConfig, bgValue: preset.value })}
                              className={`p-4 rounded-lg border-2 transition-all ${cardConfig.bgValue === preset.value ? 'border-orange-500 scale-105' : 'border-transparent hover:scale-105'}`}
                              style={{ background: preset.value }}
                            >
                              <span className="text-white text-xs font-semibold drop-shadow-lg">{preset.name}</span>
                            </button>
                          ))}
                        </div>
                      </div>

                      <div>
                        <h3 className={`text-lg font-semibold mb-3 ${themeColors.text}`}>Metin Rengi</h3>
                        <div className="flex gap-3">
                          {['#ffffff', '#000000', '#f59e0b'].map((color) => (
                            <button
                              key={color}
                              onClick={() => setCardConfig({ ...cardConfig, textColor: color })}
                              className={`w-12 h-12 rounded-full border-4 transition-all ${cardConfig.textColor === color ? 'border-orange-500 scale-110' : 'border-gray-300'}`}
                              style={{ backgroundColor: color }}
                            />
                          ))}
                        </div>
                      </div>

                      <div>
                        <h3 className={`text-lg font-semibold mb-3 ${themeColors.text}`}>Yazı Boyutu</h3>
                        <div className="flex gap-3">
                          {[
                            { label: 'Küçük', value: 'text-xl' },
                            { label: 'Orta', value: 'text-2xl' },
                            { label: 'Büyük', value: 'text-3xl' }
                          ].map((size) => (
                            <button
                              key={size.value}
                              onClick={() => setCardConfig({ ...cardConfig, fontSize: size.value })}
                              className={`px-4 py-2 rounded-lg transition-all ${cardConfig.fontSize === size.value ? themeColors.button : `${themeColors.card} border ${themeColors.border}`}`}
                            >
                              <span className={themeColors.text}>{size.label}</span>
                            </button>
                          ))}
                        </div>
                      </div>

                      <div>
                        <label className="flex items-center gap-2 cursor-pointer">
                          <input
                            type="checkbox"
                            checked={cardConfig.showBranding}
                            onChange={(e) => setCardConfig({ ...cardConfig, showBranding: e.target.checked })}
                            className="w-5 h-5"
                          />
                          <span className={themeColors.text}>Kitap bilgilerini göster</span>
                        </label>
                      </div>

                      <button
                        onClick={handleExportQuoteCard}
                        className="w-full py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold flex items-center justify-center gap-2 transition-all"
                      >
                        <Download size={20} />
                        Resim Olarak İndir
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {showLogReading && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                <div className={`rounded-lg max-w-sm w-full p-8 relative shadow-2xl ${isDark ? 'bg-[#382E26]' : 'bg-[#D4B896]'}`}>
                  <button
                    onClick={() => setShowLogReading(false)}
                    className={`absolute top-4 right-4 ${isDark ? 'text-[#E8D4BA] hover:text-[#B89968]' : 'text-[#654321] hover:text-[#5D3030]'}`}
                  >
                    <X size={24} />
                  </button>

                  <h2 className={`text-2xl font-bold mb-6 flex items-center gap-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>
                    <Clock size={28} />
                    Okuma Kaydet
                  </h2>

                  <div className="space-y-4">
                    <div>
                      <label className={`block text-sm font-semibold mb-2 ${isDark ? 'text-[#E8D4BA]' : 'text-[#654321]'}`}>Kaç dakika okudun?</label>
                      <input
                        type="number"
                        value={logMinutes}
                        onChange={(e) => setLogMinutes(e.target.value)}
                        placeholder="Örn: 30"
                        autoFocus
                        className={`w-full p-3 border-2 rounded-lg text-lg ${isDark
                          ? 'border-[#4A3B2F] bg-[#2D2620] text-[#E8D4BA]'
                          : 'border-[#C8A882] bg-[#E8DCC8] text-[#654321]'
                          }`}
                        onKeyPress={(e) => e.key === 'Enter' && logReadingTime()}
                      />
                    </div>

                    <button
                      onClick={logReadingTime}
                      className="w-full py-3 bg-[#7B3F3F] text-white rounded-lg font-semibold hover:bg-[#5D3030] transition-colors"
                    >
                      Kaydet
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Book Detail Modal */}
            {selectedBook && (
              <BookDetail
                book={selectedBook}
                onClose={() => setSelectedBook(null)}
                onUpdate={updateBook}
                onDelete={deleteBook}
                isDark={isDark}
                themeColors={themeColors}
                collections={collections}
                onUpdateCollection={toggleBookInCollection}
                onShareQuote={openQuoteCreator}
              />
            )}

            {/* Settings View */}
            {view === 'settings' && (
              <div className={`max-w-3xl mx-auto p-8 rounded-lg shadow-lg ${themeColors.card}`}>
                <h2 className={`text-3xl font-bold mb-8 flex items-center gap-3 ${themeColors.text}`}>
                  <Settings size={32} />
                  Ayarlar ve Özelleştirme
                </h2>

                <div className="space-y-10">
                  {/* Theme Selection */}
                  <div>
                    <h3 className={`text-xl font-semibold mb-4 flex items-center gap-2 ${themeColors.text}`}>
                      <LayoutGrid size={24} /> Tema Seçimi
                    </h3>
                    <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4">
                      {[
                        { id: 'oak', name: 'Meşe', color: '#E6CCB2' },
                        { id: 'walnut', name: 'Ceviz', color: '#3E2723' },
                        { id: 'white', name: 'Beyaz', color: '#FFFFFF' },
                        { id: 'dark', name: 'Karanlık', color: '#1A1A1A' },
                        { id: 'midnight', name: 'Gece Yarısı', color: '#020617' },
                        { id: 'forest', name: 'Orman', color: '#022C22' },
                        { id: 'paper', name: 'Kağıt', color: '#F5EAD2' }
                      ].map(t => (
                        <div
                          key={t.id}
                          onClick={() => setTheme(t.id)}
                          className={`cursor-pointer border-2 rounded-lg p-3 flex flex-col items-center gap-2 transition-all hover:scale-105 ${theme === t.id ? 'border-orange-500 shadow-md ring-2 ring-orange-500/20' : 'border-transparent hover:bg-black/5'} ${themeColors.card}`}
                        >
                          <div className={`w-10 h-10 rounded-full border shadow-inner`} style={{ backgroundColor: t.color }}></div>
                          <span className={`text-xs font-bold leading-tight text-center ${themeColors.text}`}>{t.name}</span>
                        </div>
                      ))}
                    </div>
                  </div>

                  {/* Font Selection */}
                  <div>
                    <h3 className={`text-xl font-semibold mb-4 flex items-center gap-2 ${themeColors.text}`}>
                      <Type size={24} /> Yazı Tipi
                    </h3>
                    <div className="flex gap-4">
                      {['sans', 'serif', 'mono'].map(f => (
                        <button
                          key={f}
                          onClick={() => setFont(f)}
                          className={`px-6 py-3 rounded-lg border-2 ${font === f ? 'border-[#7B3F3F] bg-[#7B3F3F] text-white' : `border-current ${themeColors.text}`} font-${f}`}
                        >
                          {f === 'sans' ? 'Modern (Sans)' : f === 'serif' ? 'Klasik (Serif)' : 'Teknik (Mono)'}
                        </button>
                      ))}
                    </div>
                  </div>

                  {/* Data Management */}
                  <div>
                    <h3 className={`text-xl font-semibold mb-4 flex items-center gap-2 ${themeColors.text}`}>
                      <Download size={24} /> Veri Yönetimi
                    </h3>
                    <div className="flex gap-4">
                      <button onClick={exportData} className={`flex items-center gap-2 px-6 py-3 rounded-lg bg-[#388E3C] text-white hover:bg-[#2E7D32]`}>
                        <Download size={20} /> Yedeği İndir (JSON)
                      </button>
                      <label className={`flex items-center gap-2 px-6 py-3 rounded-lg bg-[#1976D2] text-white hover:bg-[#1565C0] cursor-pointer`}>
                        <Upload size={20} /> Yedeği Yükle
                        <input type="file" accept=".json" onChange={importData} className="hidden" />
                      </label>
                    </div>
                    <p className={`mt-2 text-sm opacity-70 ${themeColors.text}`}>
                      Tüm kitaplığınızı, okuma geçmişinizi ve ayarlarınızı yedekleyin veya başka bir cihazdan taşıyın.
                    </p>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div >
      );
    };

    ReactDOM.render(<BookshelfApp />, document.getElementById('root'));
  </script>
</body>

</html>